flowchart TD
    A[("ğŸ“„ Legal Text Input")] --> B["âœ‚ï¸ Partition into Paragraphs<br><small>Text segmentation</small>"]
    B --> C{"ğŸ” First-Stage Classification<br><small>Filter paragraphs</small>"}
    C -->|"Doesn't need check"| D["âœ… No Further Processing<br><small>Skip verification</small>"]
    C -->|"Needs check"| E["ğŸ” Search Query Generator<br><small>Generate targeted queries</small>"]
    E --> F["ğŸ“Š Data Retriever<br><small>Google API search</small>"]
    F --> G["ğŸ§  Embedding Generation<br><small>VoyageAI embeddings for<br>search results & paragraph</small>"]
    G --> H{"âš–ï¸ Final Classification<br><small>Compare embeddings</small>"}
    H -->|"No Hallucination"| I["âœ“ Verified Content<br><small>Factually accurate</small>"]
    H -->|"Contains Hallucination"| J["âŒ Flagged Content<br><small>Factual errors detected</small>"]
    
    classDef process fill:#4682B4,stroke:#000000,stroke-width:2px,color:#FFFFFF,font-weight:bold,border-radius:8px;
    classDef decision fill:#FF6B81,stroke:#000000,stroke-width:2px,color:#FFFFFF,font-weight:bold,border-radius:16px;
    classDef output fill:#2E8B57,stroke:#000000,stroke-width:2px,color:#FFFFFF,font-weight:bold,border-radius:4px;
    classDef input fill:#6A5ACD,stroke:#000000,stroke-width:2px,color:#FFFFFF,font-weight:bold,border-radius:24px;
    
    class B,E,F,G process;
    class C,H decision;
    class D,I,J output;
    class A input;
